<template name="chatFrame">
  <div class="chat-frame">
    <main class="body">
      <div class="chat-message-lists">
        {{#if Template.subscriptionsReady}}
          {{#each chatMessagesList}}
            {{> chatMessageListItem}}
          {{/each}}

          {{#if onTyping}}
            {{>chatStatusInput}}
          {{/if}}
        {{else}}
          Loading...
        {{/if}}
      </div>
    </main>
  </div>
</template>

<template name="chatMessageListItem">
  <div class="chat-message-item">
    {{#if isDate type}}
      <p class="date"><span>{{momentKoreanDate createdAt 5}}</span></p>
    {{else}}
      {{#unless isUserMessage user}}
        <span href="#" class="avatar-sm from right">
          {{{getPicture user}}}
        </span>
        <p class="from chat-balloon right">
          {{content}}
        </p>
    {{else}}
        <span href="#" class="avatar-sm me left">
          {{{getPicture user}}}
        </span>
        <p class="me chat-balloon left">
          {{content}}
        </p>
      {{/unless}}
    {{/if}}
  </div>
</template>

<template name="chatStatusInput">
  <div class="chat-message-item">
    <a href="#" class="avatar-sm">
      {{{getPartnerPictures}}}
    </a>
    <div class="from chat-balloon right">
      <div class="typing-indicator">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>
</template>